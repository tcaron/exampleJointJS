<!DOCTYPE>

<html lang="fr">
<html>
<link href="" rel="stylesheet">
<head>
    <meta charset="utf-8">
    <title>Example jointJS</title>
    <link rel="stylesheet" href="css/shape.css">
    <script src="js/jquery-3.2.0.min.js"></script>
    <script src="js/index.js"></script>
    <script src="js/backbone.js"></script>
    <script src="js/joint.min.js"></script>
    <script src="js/devs.js"></script>
</head>

<body>
<div id="myholder"></div>
<script type="text/javascript">

    var graph = new joint.dia.Graph;

    var paper = new joint.dia.Paper({
        el: $('#myholder'),
        width: 1500,
        height: 500,
        model: graph,
        gridSize: 1
    });

    /*  var rect = new joint.shapes.basic.Rect({
     position: { x: 100, y: 30 },
     size: { width: 100, height: 30 },
     attrs: { rect: { fill: 'blue' }, text: { text: 'my box !!', fill: 'white' } }
     });

     var rect2 = rect.clone();
     rect2.translate(300);


     var link = new joint.dia.Link({
     source: { id: rect.id },
     target: { id: rect2.id }
     });


     graph.addCells([rect, rect2, link]);*/

    function ClearFields() {

        document.getElementById("name_id").value = "";
        document.getElementById("parameter_1").value = "";
        document.getElementById("parameter_2").value = "";
    }

    function GetTextfieldName()
    {

        var name = document.getElementById('name_id').value;
        return name;

    }

    function GetParametersOne(){

        var parameter_1 = document.getElementById('parameter_1').value;
        return parameter_1;

    }

    function GetParametersTwo(){
        var parameter_2 = document.getElementById('parameter_2').value;
        return parameter_2;
    }

    function CreateEtat(){
        var uml = joint.shapes.uml;
        var states = {

            S1: new uml.State({
                position: { x:100  , y: 100 },
                size: { width: 200, height: 100 },
                name: GetTextfieldName(),
                events: [GetParametersOne(),GetParametersTwo()],
                attrs: {
                    '.uml-state-body': {
                        fill: 'rgba(48, 208, 198, 0.1)',
                        stroke: 'rgba(48, 208, 198, 0.5)',
                        'stroke-width': 1.5
                    },
                    '.uml-state-separator': {
                        stroke: 'rgba(48, 208, 198, 0.4)'
                    }
                }
            }),

        };

        _.each(states, function(c) { graph.addCell(c); });
    }

    function CreateLink(){
        var link = new joint.dia.Link({
            source: { x: 10, y: 20 },
            target: { x: 350, y: 20 },
            attrs: {}
        });

        graph.addCells([link]);
    }


</script>
<FORM>
    Name : <input type="text" name="name" id="name_id"  /><br>
    First parameter : <input type="text" name="parameter1" id="parameter_1"  /><br>
    Second parameter : <input type="text" name="parameter2" id="parameter_2"  /><br>
    <input type="button" value="Ajouter un etat" onclick="CreateEtat(),ClearFields()" />
    <input type="button" value="Ajouter une transition" onclick="CreateLink()" />
</FORM>

</body>
</html>